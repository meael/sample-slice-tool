# Ralph Progress Log
Started: Sun Feb  1 21:10:08 EET 2026
---

## Codebase Patterns
- Marker controls are rendered in `MarkerControlStrip.tsx` above the waveform
- Sections are derived from consecutive markers; a section's enabled state comes from `startMarker.enabled`
- Use `markerKeyboardIndexMap` to get keyboard index (1-9) for markers starting enabled sections
- Use `markerSectionMap` to check if a marker starts a section and whether it's enabled/disabled

---

## 2026-02-01 21:15 - US-001
- Implemented showing keyboard label (1-9) as default for enabled sections
- Close icon is now hidden for markers starting enabled sections
- Added `getMarkerSectionMap()` helper to determine if a marker starts an enabled/disabled section
- Files changed: `src/components/MarkerControlStrip.tsx`
- **Learnings for future iterations:**
  - The keyboard label was previously positioned to the left of the close icon; now it's centered above the marker
  - Markers not starting any section (e.g., the last marker) still show the close icon
  - Browser testing verified: labels 1, 2, 3 visible for Section 1, 2, 3; × icon visible for end marker
---

## 2026-02-01 21:45 - US-002
- Implemented hover-to-reveal close icon behavior for enabled sections
- Added `hoveredControlId` state to track which control area is being hovered
- Both keyboard label and close icon are rendered with opacity transitions (150ms)
- Close icon uses `hover:bg-red-600` for danger color on hover
- Used `pointerEvents: 'none'` when close icon is hidden to prevent accidental clicks
- Files changed: `src/components/MarkerControlStrip.tsx`
- **Learnings for future iterations:**
  - Use opacity transitions with `pointerEvents` toggle for smooth show/hide without layout shift
  - The keyboard label element itself has no click handler, only the close icon is clickable
  - Browser testing verified: label swaps to red × on hover, fades back on mouseout, click deletes marker
---

## 2026-02-01 22:15 - US-003
- Implemented `cursor: not-allowed` on the control container for disabled sections
- Added `isDisabledSection` variable to detect markers starting disabled sections
- Close icon gets explicit `cursor: pointer` style to override parent's `not-allowed`
- Files changed: `src/components/MarkerControlStrip.tsx`
- **Learnings for future iterations:**
  - Disabled section detection: `section !== undefined && !section.enabled`
  - Parent cursor + child cursor override pattern: parent sets `not-allowed`, child sets `pointer`
  - Browser testing verified: disabled section shows × (not keyboard label), cursor is not-allowed on container but pointer on close icon, red hover effect works, clicking deletes marker
---

## 2026-02-01 22:45 - US-004
- Added explicit min-w/min-h dimensions to control container for stable hover area
- Added `pointerEvents: 'none'` to keyboard label to prevent hover state flickering
- Adjusted top margin from 5px to 3px for better visual alignment
- Files changed: `src/components/MarkerControlStrip.tsx`
- **Learnings for future iterations:**
  - Use min-w/min-h on parent container to create stable hover target area
  - Apply `pointerEvents: 'none'` to child elements that shouldn't affect hover state
  - MarkerControlStrip and WaveformCanvas are vertically stacked, so no drag interference is possible
  - Browser testing verified: rapid mouse movement shows no flickering, transitions are smooth
---
